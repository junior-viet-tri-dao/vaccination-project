<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Hồ sơ tiêm phòng</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans leading-normal tracking-normal">

<!-- Container chính -->
<div class="max-w-5xl mx-auto my-10 bg-white shadow-lg rounded-xl overflow-hidden border border-gray-200">

    <!-- Header -->
    <div class="bg-blue-600 text-white px-6 py-4 flex justify-between items-center">
        <h2 class="text-xl font-semibold">Hồ sơ thông tin cá nhân</h2>
        <a th:href="@{/normalUser/edit-profile}"
           class="text-sm underline hover:text-gray-200 transition">
            Nhấn vào đây để sửa đổi thông tin cá nhân
        </a>
    </div>

    <!-- Thông tin cá nhân -->
    <div class="p-6 grid grid-cols-2 gap-4 text-gray-700">
        <p><span class="font-semibold">Tên:</span> <span th:text="${profile.ten}">Nguyễn Văn X</span></p>
        <p><span class="font-semibold">Ngày sinh:</span>
            <span th:text="${#temporals.format(profile.ngaySinh, 'dd/MM/yyyy')}">20/08/1993</span></p>
        <p><span class="font-semibold">Giới tính:</span> <span th:text="${profile.gioiTinh}">Nam</span></p>
        <p><span class="font-semibold">Địa chỉ:</span> <span th:text="${profile.diaChi}">193 Nguyễn Lương Bằng, Đà Nẵng</span></p>
    </div>

    <!-- Bảng lịch sử tiêm -->
    <div class="p-6">
        <table class="w-full border-collapse border border-gray-300 text-sm text-center">
            <thead>
            <tr class="bg-blue-100">
                <th class="border border-gray-300 px-2 py-2">STT</th>
                <th class="border border-gray-300 px-2 py-2">Thời gian</th>
                <th class="border border-gray-300 px-2 py-2">Địa điểm</th>
                <th class="border border-gray-300 px-2 py-2">Tên Vắc xin</th>
                <th class="border border-gray-300 px-2 py-2">Loại Vắc xin</th>
                <th class="border border-gray-300 px-2 py-2">Liều lượng</th>
                <th class="border border-gray-300 px-2 py-2">Người tiêm</th>
                <th class="border border-gray-300 px-2 py-2">Kết quả</th>
                <th class="border border-gray-300 px-2 py-2">Ghi chú</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="item : ${profile.lichSuTiem}" class="hover:bg-gray-50">
                <td class="border border-gray-300 px-2 py-2" th:text="${item.stt}"></td>
                <td class="border border-gray-300 px-2 py-2"
                    th:text="${#temporals.format(item.thoiGian, 'HH:mm dd/MM/yyyy')}"></td>
                <td class="border border-gray-300 px-2 py-2" th:text="${item.diaDiem}"></td>
                <td class="border border-gray-300 px-2 py-2" th:text="${item.tenVacXin}"></td>
                <td class="border border-gray-300 px-2 py-2" th:text="${item.loaiVacXin}"></td>
                <td class="border border-gray-300 px-2 py-2" th:text="${item.lieuLuong}"></td>
                <td class="border border-gray-300 px-2 py-2" th:text="${item.nguoiTiem}"></td>
                <td class="border border-gray-300 px-2 py-2"
                    th:text="${item.ketQua}"
                    th:classappend="${item.ketQua == 'Tốt'} ? 'text-green-600 font-semibold' : ''"></td>
                <td class="border border-gray-300 px-2 py-2" th:text="${item.ghiChu}"></td>
            </tr>
            <tr th:if="${#lists.isEmpty(profile.lichSuTiem)}" class="hover:bg-gray-50">
                <td class="border border-gray-300 px-2 py-2" colspan="9">Chưa có lịch sử tiêm chủng.</td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- Nút -->
    <div class="p-6 flex justify-center">
        <button onclick="window.close()"
                class="bg-blue-600 text-white px-6 py-2 rounded-lg shadow hover:bg-blue-700 transition">
            Đóng cửa sổ
        </button>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script th:src="@{/js/alert-utils.js}"></script>
<script th:inline="javascript">
    var successMsg = /*[[${success}]]*/ "";
    if (successMsg && successMsg !== "") {
        showSuccess(successMsg);
    }
</script>
</body>
</html>